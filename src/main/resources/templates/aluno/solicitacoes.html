<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<div class="content-wrapper" th:fragment="conteudo">
	<div class="row">
		<div class="col-md-12 grid-margin">
			<div class="d-flex justify-content-between align-items-center">
				<div>
					<h4 class="font-weight-bold mb-0">Solicitações</h4>
				</div>
			</div>
		</div>
	</div> 

	<div class="row">
		<div class="col-md-12 grid-margin stretch-card">
			<div class="card">
				<div class="card-body">
					<p class="card-title mb-0">Solicitações do aluno <span th:text="${solicitacao[0].aluno.nome}"></span></p> 
					<div class="table-responsive" style="padding: 15px;">
						<table class="table display nowrap" style="width:100%" id="table_solicitacao">
							<thead>
								<tr>
									<th>Cod</th>
									<th>Documento</th>
                                    <th>Curso</th>
                                    <th>Data de Abertura</th>
                                    <th>Data de Conclusão</th>
									<th>Status</th> 
									<th>Açao</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="solicitacao : ${solicitacao}">
									<td>SL<span th:text="${T(java.lang.String).format('%05d', solicitacao.id)}"></span></td>
									<td><span th:text="${solicitacao.documento.nome}"></span></td>
                                    <td><span th:text="${solicitacao.curso.nome}"></span></td>
                                    <td><span th:text="${solicitacao.data_abertura.substring(0, 10)}"></span></td>
                                    <td><span th:text="${solicitacao.data_conclusao}"></span></td>
									<td th:switch="${solicitacao.status}">
										<span th:case="1">Pendente</span>
										<span th:case="2">Concluida</span>
										<span th:case="3">Entregue</span>
										<span th:case="4">Negada</span>
									</td>
									<td>
										<span th:if="${solicitacao.status.equals(1)}">
											<a class="btn btn-success btn-icon-text btn-sm" th:href="@{/solicitacoes/concluir/2/{id}(id = ${solicitacao.id})}">
												<i class="ti-check btn-icon-prepend"></i>
												Concluir 
											</a>
											<a class="btn btn-danger btn-icon-text btn-sm" th:href="@{/solicitacoes/concluir/4/{id}(id = ${solicitacao.id})}">
												<i class="ti-check btn-icon-prepend"></i>
												Negar
											</a>
										</span>
										<span th:if="${solicitacao.status.equals(2)}" >
											<a class="btn btn-success btn-icon-text btn-sm" th:href="@{/solicitacoes/concluir/3/{id}(id = ${solicitacao.id})}">
												<i class="ti-check btn-icon-prepend"></i>
												Entregar
											</a>
										</span>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script>
		$(document).ready(function () {
			$('#table_solicitacao').DataTable({
				responsive: true
			});
		});
	</script>
</div>

</html>